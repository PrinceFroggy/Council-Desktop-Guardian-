############################
# COUNCIL DESKTOP GUARDIAN #
############################

# Copy this file to .env and fill in the values you will use.
# macOS/Linux:  cp .env.example .env
# Windows:      copy .env.example .env
#
# NEVER commit .env to git.

### ===== APP / LOGGING =====
APP_ENV=development          # development|production
LOG_LEVEL=info               # debug|info|warning|error
TIMEZONE=America/Toronto     # used for schedules / logs

### ===== CORE SERVICES =====
REDIS_URL=redis://localhost:6379/0
REPO_PATH=.                  # repo indexer root (default '.')
PUBLIC_BASE_URL=http://localhost:7070
COUNCIL_ROLES=security,ethics,code
COUNCIL_USE_ARBITER=1

### ===== LLM / AI PROVIDERS =====
OLLAMA_HOST=http://localhost:11434   # if using Ollama locally
OPENROUTER_API_KEY=
GROQ_API_KEY=

### ===== TELEGRAM (alerts + approvals) =====
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

### ===== TWILIO (optional SMS approvals/alerts) =====
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FROM=                 # e.g. +14155552671
APPROVER_PHONE=              # e.g. +1647xxxxxxx

### ===== BROKER / TRADING =====
TRADING_BROKER=none          # none|alpaca
ALPACA_API_KEY=
ALPACA_API_SECRET=
ALPACA_PAPER=1               # 1=paper, 0=live
ALPACA_BASE_URL=             # optional override; empty uses sdk defaults

### ===== PAPER TRADING ENGINE =====
PAPER_START_CASH=100000

### ===== AUTOPILOT (quant loop) =====
AUTOPILOT_ENABLED=0                  # 1 turns on scheduler loop
AUTOPILOT_CAN_EXECUTE=0              # 1 allows placing orders, 0 report-only
AUTOPILOT_INTERVAL_SECONDS=1800      # 30 min
AUTOPILOT_MAX_CANDIDATES=10
AUTOPILOT_MAX_TRADES_PER_RUN=2
AUTOPILOT_MIN_SCORE=0.70
AUTOPILOT_RESPECT_COUNCIL=0          # 1 blocks if Council votes NO

### ===== RISK CONTROLS =====
RISK_MAX_POSITION_PCT=0.10           # max % of equity per position
RISK_MAX_SECTOR_PCT=0.30             # sector concentration cap
RISK_DEFAULT_STOP_ATR=2.0            # stop distance in ATR multiples
RISK_DEFAULT_TAKEPROFIT_RR=2.0       # takeprofit reward:risk multiple

### ===== PRICE DATA / BACKTESTS =====
PRICE_DATA_PROVIDER=yfinance         # yfinance|alpaca
BACKTEST_LOOKBACK_DAYS=365

### ===== NEWS PIPELINE -> SIGNALS -> PROPOSALS =====
NEWS_API_KEY=
NEWS_POLL_INTERVAL_SECONDS=900       # 15 minutes
NEWS_MAX_ITEMS_PER_POLL=25
NEWS_ENABLE_MARKET_HOURS_ONLY=0      # 1 only poll during market hours
NEWS_PROPOSE_LIVE=1                  # include live proposal action (still gated)
NEWS_WATCHLIST=                      # comma-separated tickers (optional)
NEWS_SOURCES_FILE=app/news_sources.txt
NEWS_QUERY=stock market              #stock market OR earnings OR downgrade OR upgrade
PLAN_ENDPOINT=http://localhost:7070/plan


### ===== OPTIONAL SIGNAL SOURCES (enable by setting keys) =====
FMP_API_KEY=                         # Financial Modeling Prep
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=
REDDIT_USER_AGENT=council-desktop-guardian/1.0
GOOGLE_TRENDS_GEO=US
CONGRESS_API_KEY=
FRED_API_KEY=

### ===== OPTIONAL WEB SEARCH (ticker discovery) =====
PERPLEXITY_API_KEY=
SERPER_API_KEY=

### ===== WEB FETCH SAFETY (important) =====
ENABLE_WEB_RESEARCH=0                # 1 allows the bot to fetch/parse web pages
WEB_ALLOWLIST=                       # comma-separated domains allowed for fetch (recommended)

### ===== DANGEROUS TOOLS SAFETY (important) =====
ENABLE_DANGEROUS_TOOLS=0             # 1 enables 'dangerous' actions
ALLOW_ABSOLUTE_PATHS=0               # 1 allows absolute paths in file actions

### ===== OPTIONAL SAAS / BILLING =====
SAAS_ENABLED=0
JWT_SECRET=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
DATABASE_URL=sqlite:///./council.db

